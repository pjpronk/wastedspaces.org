import{d as g,C as f,D as Y,E as I,t as u,v as p,F as x,_ as L,r as w,o as T,G as K,z as l,x as y,H as P,l as G,A as b,B as O,y as S,m as W,I as D,J as N,K as B,L as Q}from"./CEGTXRNu.js";import{u as X}from"./C6AqIgVv.js";const ee=["innerHTML"],te=g({__name:"BaseIcon",props:{icon:{}},async setup(i){let e,o;const n=i,s=Object.fromEntries(Object.entries(Object.assign({"/assets/icons/add.svg":()=>f(()=>import("./cRUi5Wbx.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/calendar.svg":()=>f(()=>import("./DrqZ3LR8.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/documents.svg":()=>f(()=>import("./D0EcyRd7.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/farm.svg":()=>f(()=>import("./0PHxwUTU.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/house.svg":()=>f(()=>import("./BtkviBJP.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/industry.svg":()=>f(()=>import("./BKUyxpaI.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/info.svg":()=>f(()=>import("./C1Nw4fO-.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_standalone.svg":()=>f(()=>import("./C_pHScIm.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_standalone_red.svg":()=>f(()=>import("./CaUd5saq.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_text.svg":()=>f(()=>import("./DF4MJzAr.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_text_long.svg":()=>f(()=>import("./BmBUCIcV.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_white.svg":()=>f(()=>import("./CmpJqoP0.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/office.svg":()=>f(()=>import("./DRdKqeIu.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/other.svg":()=>f(()=>import("./BGeYsIfF.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/search.svg":()=>f(()=>import("./BZ8w0ofb.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/shop.svg":()=>f(()=>import("./ClPQWvmX.js"),[],import.meta.url).then(t=>t.default)})).map(([t,c])=>[t.split("/").pop().split(".").shift(),c])),a=n.icon&&([e,o]=Y(()=>{var t;return(t=s==null?void 0:s[n.icon])==null?void 0:t.call(s)}),e=await e,o(),e);return(t,c)=>I(a)?(u(),p("div",{key:0,innerHTML:I(a),class:"base-icon"},null,8,ee)):x("",!0)}}),M=L(te,[["__scopeId","data-v-e37e1e8d"]]),oe={class:"base-location-input"},ne=["value"],se=g({__name:"BaseLocationInput",props:{value:{type:String,default:""},google:{type:Object,required:!0}},emits:["locationSelected"],setup(i,{emit:e}){const o=i,n=w(null),s={types:["geocode"],fields:["formatted_address","geometry","name","address_components"]};T(()=>{t()});const a=e;function t(){var _;const c=document.getElementById("geocode");n.value=new o.google.maps.places.Autocomplete(c,s),(_=n.value)==null||_.addListener("place_changed",()=>{var d,m,v;const r=(d=n.value)==null?void 0:d.getPlace();if(r){const h=(m=r.geometry)==null?void 0:m.location.lat(),E=(v=r.geometry)==null?void 0:v.location.lng();if(h&&E){const k=new K(h,E);a("locationSelected",k)}}})}return(c,_)=>{const r=M;return u(),p("div",oe,[l(r,{class:"icon-sxs secondary",icon:"search"}),y("input",{class:"input",id:"geocode",value:i.value,type:"text",placeholder:"Zoek op locatie"},null,8,ne)])}}}),ie=L(se,[["__scopeId","data-v-a90274ae"]]);function ae(i,e,o,n){function s(a){return a instanceof o?a:new o(function(t){t(a)})}return new(o||(o=Promise))(function(a,t){function c(d){try{r(n.next(d))}catch(m){t(m)}}function _(d){try{r(n.throw(d))}catch(m){t(m)}}function r(d){d.done?a(d.value):s(d.value).then(c,_)}r((n=n.apply(i,[])).next())})}function ce(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var re=function i(e,o){if(e===o)return!0;if(e&&o&&typeof e=="object"&&typeof o=="object"){if(e.constructor!==o.constructor)return!1;var n,s,a;if(Array.isArray(e)){if(n=e.length,n!=o.length)return!1;for(s=n;s--!==0;)if(!i(e[s],o[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(o).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(o,a[s]))return!1;for(s=n;s--!==0;){var t=a[s];if(!i(e[t],o[t]))return!1}return!0}return e!==e&&o!==o},le=ce(re);const F="__googleMapsScriptId";var A;(function(i){i[i.INITIALIZED=0]="INITIALIZED",i[i.LOADING=1]="LOADING",i[i.SUCCESS=2]="SUCCESS",i[i.FAILURE=3]="FAILURE"})(A||(A={}));class ${constructor({apiKey:e,authReferrerPolicy:o,channel:n,client:s,id:a=F,language:t,libraries:c=[],mapIds:_,nonce:r,region:d,retries:m=3,url:v="https://maps.googleapis.com/maps/api/js",version:h}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=o,this.channel=n,this.client=s,this.id=a||F,this.language=t,this.libraries=c,this.mapIds=_,this.nonce=r,this.region=d,this.retries=m,this.url=v,this.version=h,$.instance){if(!le(this.options,$.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify($.instance.options)}`);return $.instance}$.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?A.FAILURE:this.done?A.SUCCESS:this.loading?A.LOADING:A.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,o)=>{this.loadCallback(n=>{n?o(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,o;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(a=>!n[a]&&delete n[a]),!((o=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||o===void 0)&&o.importLibrary||(a=>{let t,c,_,r="The Google Maps JavaScript API",d="google",m="importLibrary",v="__ib__",h=document,E=window;E=E[d]||(E[d]={});const k=E.maps||(E.maps={}),U=new Set,R=new URLSearchParams,Z=()=>t||(t=new Promise((C,V)=>ae(this,void 0,void 0,function*(){var j;yield c=h.createElement("script"),c.id=this.id,R.set("libraries",[...U]+"");for(_ in a)R.set(_.replace(/[A-Z]/g,J=>"_"+J[0].toLowerCase()),a[_]);R.set("callback",d+".maps."+v),c.src=this.url+"?"+R,k[v]=C,c.onerror=()=>t=V(Error(r+" could not load.")),c.nonce=this.nonce||((j=h.querySelector("script[nonce]"))===null||j===void 0?void 0:j.nonce)||"",h.head.append(c)})));k[m]?console.warn(r+" only loads once. Ignoring:",a):k[m]=(C,...V)=>U.add(C)&&Z().then(()=>k[m](C,...V))})(n);const s=this.libraries.map(a=>this.importLibrary(a));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),a=>{const t=new ErrorEvent("error",{error:a});this.loadErrorCallback(t)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const o=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${o} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},o)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const q=g({__name:"GoogleMapLoader",setup(i){const e=G(),o=w(null);return T(async()=>{console.log("GoogleMapLoader mounted",e.public.GOOGLE_MAPS_API_KEY,e),o.value=await new $({libraries:["places","marker"],apiKey:e.public.GOOGLE_MAPS_API_KEY}).load().then()}),(n,s)=>(u(),p("div",null,[I(o)?P(n.$slots,"default",{key:0,google:I(o)}):x("",!0)]))}}),_e={class:"location-input"},ue=g({__name:"LocationInput",props:{value:{type:String,default:""}},emits:["locationSelected"],setup(i,{emit:e}){const o=e,n=s=>{o("locationSelected",s)};return(s,a)=>{const t=ie,c=q;return u(),p("div",_e,[l(c,null,{default:b(({google:_})=>[l(t,{onLocationSelected:n,value:i.value,google:_},null,8,["value","google"])]),_:1})])}}}),de=L(ue,[["__scopeId","data-v-1787c620"]]),pe={};function me(i,e){return u(),p("p",null,[P(i.$slots,"default",{},void 0,!0)])}const H=L(pe,[["render",me],["__scopeId","data-v-4efd3f75"]]),he={},fe={class:"base-tag text-s"};function ge(i,e){return u(),p("div",fe,[P(i.$slots,"default",{},void 0,!0)])}const ve=L(he,[["render",ge],["__scopeId","data-v-65da5038"]]),ye=i=>{switch(i){case"COMERCIEEL":return"office";case"PRIVAAT":return"house";case"PUBLIEK":return"farm";default:return"other"}},Ie={class:"location-header"},Le={class:"flex-column"},Ee={class:"location-tags flex-row"},be=g({__name:"LocationListItem",props:{location:{}},emits:["locationSelected"],setup(i,{emit:e}){const{$relativeTime:o}=W(),n=i,s=e,a=()=>{s("locationSelected",n.location.latLng)};return(t,c)=>{const _=M,r=H,d=ve;return u(),p("div",{class:"location-list-item",onClick:a},[y("div",Ie,[l(_,{class:"icon-l secondary",icon:I(ye)(t.location.type.toString())},null,8,["icon"]),y("div",Le,[l(r,{class:"text-primary bold"},{default:b(()=>[O(S(t.location.address),1)]),_:1}),l(r,{class:"text-grey text-s"},{default:b(()=>[O(S(t.location.city),1)]),_:1})])]),y("div",Ee,[l(r,{class:"text-black text-s flex-row icon-text"},{default:b(()=>[l(_,{icon:"calendar",class:"secondary icon-xs"}),O(" "+S(I(o)(t.location.createdAt.toDate())),1)]),_:1}),l(d,null,{default:b(()=>[O(S(t.location.type),1)]),_:1})])])}}}),z=L(be,[["__scopeId","data-v-b85ae2fc"]]),we={class:"location-list"},$e=g({__name:"LocationList",props:{locations:{}},emits:["locationSelected"],setup(i,{emit:e}){const o=e,n=s=>{o("locationSelected",s)};return(s,a)=>{const t=z;return u(),p("div",we,[(u(!0),p(D,null,N(s.locations,c=>(u(),B(t,{key:c.latLng.latitude+","+c.latLng.longitude,location:c,onLocationSelected:n},null,8,["location"]))),128))])}}}),Se=L($e,[["__scopeId","data-v-6d9fb022"]]),ke={class:"button"},Oe=g({__name:"BaseButton",props:{icon:{}},setup(i){return(e,o)=>{const n=M;return u(),p("button",ke,[e.icon?(u(),B(n,{key:0,icon:e.icon,class:"button-icon"},null,8,["icon"])):x("",!0),P(e.$slots,"default",{},void 0,!0)])}}}),Ae=L(Oe,[["__scopeId","data-v-385ac23b"]]),Pe=["src"],xe=g({__name:"BaseImage",props:{image:{}},setup(i){return(e,o)=>(u(),p("img",{class:"base-image",src:e.image},null,8,Pe))}}),Re=g({__name:"LocationCard",props:{location:{}},emits:["locationSelected"],setup(i,{emit:e}){const o=i,n=e,s=()=>{n("locationSelected",o.location.latLng)},a=`https://maps.googleapis.com/maps/api/streetview?size=600x400&key=AIzaSyDx3x7OILDe1wWmng_pllwoxrH2mlqekCI&location=${o.location.latLng.latitude},${o.location.latLng.longitude}`;return(t,c)=>{const _=xe,r=z;return u(),p("div",{class:"location-card",onClick:s},[l(_,{image:a,alt:"Location Street View",class:"location-image"}),l(r,{location:t.location},null,8,["location"])])}}}),Ce=L(Re,[["__scopeId","data-v-c7b49f84"]]),Te={class:"location-slider"},De=g({__name:"LocationSlider",props:{locations:{}},emits:["locationSelected"],setup(i,{emit:e}){const o=e,n=s=>{o("locationSelected",s)};return(s,a)=>{const t=Ce;return u(),p("div",Te,[(u(!0),p(D,null,N(s.locations,c=>(u(),B(t,{key:c.latLng.latitude+","+c.latLng.longitude,location:c,onLocationSelected:n},null,8,["location"]))),128))])}}}),Be=L(De,[["__scopeId","data-v-1b7f3f9e"]]),Me={class:"location-info-window"},Ve=g({__name:"LocationInfoWindow",props:{location:{}},setup(i){return(e,o)=>{const n=H;return u(),p("div",Me,[l(n,null,{default:b(()=>[O(S(e.location.address),1)]),_:1}),l(n,null,{default:b(()=>[O("Latitude: "+S(e.location.latitude)+", Longitude: "+S(e.location.longitude),1)]),_:1})])}}}),je=L(Ve,[["__scopeId","data-v-7cde891d"]]),Ge={key:0},Ne=g({__name:"BaseMarker",props:{map:{},position:{},title:{}},setup(i){const e=i,o=w(null),s=G().app.baseURL||"/",a=document.createElement("img");a.src=`${s}icons/marker.svg`.replace("//","/"),a.style.width="30px",a.style.height="30px";const t=new google.maps.Marker({map:e.map,position:{lat:e.position.lat,lng:e.position.lng},icon:a.src}),c=new google.maps.InfoWindow({disableAutoPan:!0});return t.addListener("click",()=>{c.close(),o.value instanceof HTMLElement&&c.setContent(o.value),c.open(e.map,t)}),(_,r)=>_.map?(u(),p("div",Ge,[y("div",{ref_key:"infoWindowRef",ref:o},[P(_.$slots,"default")],512)])):x("",!0)}}),Ue=g({__name:"BaseMap",props:{google:{},mapConfig:{},center:{}},setup(i){const e=i,o=w(null),n=w(null);return T(async()=>{try{n.value=new e.google.maps.Map(o.value,e.mapConfig)}catch(s){console.error("Error aloading map: ",s)}}),Q(()=>e.center,s=>{console.log("newCenter",s),n.value&&n.value.panTo(s)},{deep:!0}),(s,a)=>(u(),p(D,null,[y("div",{ref_key:"mapContainer",ref:o,class:"map"},null,512),I(n)?P(s.$slots,"default",{key:0,map:I(n)},void 0,!0):x("",!0)],64))}}),Fe=L(Ue,[["__scopeId","data-v-7b8c1f86"]]),Ke={class:"full-width"},We=g({__name:"LocationMap",props:{locations:{},center:{}},setup(i){const e=i,o=w(null),n=G(),s={center:{lat:e.center.latitude,lng:e.center.longitude},mapId:n.public.GOOGLE_MAPS_MAP_ID,zoom:12,disableDefaultUI:!0};return T(()=>{console.log(o.value)}),(a,t)=>{const c=je,_=Ne,r=Fe,d=q;return u(),p("div",Ke,[l(d,null,{default:b(({google:m})=>[l(r,{google:m,mapConfig:s,center:{lat:a.center.latitude,lng:a.center.longitude}},{default:b(({map:v})=>[(u(!0),p(D,null,N(a.locations,h=>(u(),B(_,{map:v,google:m,position:{lat:h.latLng.latitude,lng:h.latLng.longitude},title:h.address,key:h.id},{default:b(()=>[l(c,{location:h},null,8,["location"])]),_:2},1032,["map","google","position","title"]))),128))]),_:2},1032,["google","center"])]),_:1})])}}}),qe={class:"index"},He={class:"map-overlay"},ze={class:"sidebar"},Ze={class:"flex-row"},Je={class:"top-bar"},Ye={class:"info-buttons"},Qe={class:"bottom-bar"},tt=g({__name:"index",setup(i){const{$firestore:e}=W();X({title:"Wasted Spaces",meta:[{name:"",content:""}]});const o=w([]),n=w(new K(51.9146308,4.4709485)),s=w(100),a=async()=>{try{o.value=await e.getLocationsInRadius(n.value.latitude,n.value.longitude,s.value),console.log("Frontend fetched locations:",o.value)}catch(c){console.error("Error fetching locations:",c)}},t=c=>{console.log("handleLocationSelected",c),n.value=c};return a(),(c,_)=>{const r=M,d=de,m=Se,v=Ae,h=Be,E=We;return u(),p("div",qe,[y("div",He,[y("div",ze,[y("div",Ze,[l(r,{class:"logo icon-lxl",icon:"logo_standalone_red"}),l(r,{class:"logo",icon:"logo_text_long"})]),l(d,{class:"mt-1-0",onLocationSelected:t}),l(m,{locations:I(o),class:"mt-1-0",onLocationSelected:t},null,8,["locations"])]),y("div",Je,[l(d,{onLocationSelected:t})]),y("div",Ye,[y("div",null,[l(v,{class:"primary-inverted",icon:"documents"}),l(v,{class:"primary-inverted mt-0-5",icon:"info"})]),l(v,{class:"primary-inverted",icon:"add"})]),y("div",Qe,[l(h,{locations:I(o),onLocationSelected:t},null,8,["locations"])])]),l(E,{class:"map",locations:I(o),center:I(n)},null,8,["locations","center"])])}}});export{tt as default};
