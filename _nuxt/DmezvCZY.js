import{d as y,C as v,D as ne,E as w,t as l,v as h,F as B,_ as b,r as $,o as K,G as J,z as c,x as E,H as T,l as z,A as k,c as se,I as V,J as q,K as j,B as x,y as P,L as ae,m as Y,M as ie,u as re,N as ce}from"./BBNga1Pn.js";import{u as le}from"./oBkIboi-.js";const ue=["innerHTML"],de=y({__name:"BaseIcon",props:{icon:{}},async setup(i){let e,o;const a=i,s=Object.fromEntries(Object.entries(Object.assign({"/assets/icons/add.svg":()=>v(()=>import("./cRUi5Wbx.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/calendar.svg":()=>v(()=>import("./DrqZ3LR8.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/documents.svg":()=>v(()=>import("./D0EcyRd7.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/farm.svg":()=>v(()=>import("./0PHxwUTU.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/house.svg":()=>v(()=>import("./BtkviBJP.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/industry.svg":()=>v(()=>import("./BKUyxpaI.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/info.svg":()=>v(()=>import("./C1Nw4fO-.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_standalone.svg":()=>v(()=>import("./C_pHScIm.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_standalone_red.svg":()=>v(()=>import("./CaUd5saq.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_text.svg":()=>v(()=>import("./DF4MJzAr.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_text_long.svg":()=>v(()=>import("./BmBUCIcV.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_white.svg":()=>v(()=>import("./CmpJqoP0.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/office.svg":()=>v(()=>import("./DRdKqeIu.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/other.svg":()=>v(()=>import("./BGeYsIfF.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/search.svg":()=>v(()=>import("./BZ8w0ofb.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/shop.svg":()=>v(()=>import("./ClPQWvmX.js"),[],import.meta.url).then(t=>t.default)})).map(([t,r])=>[t.split("/").pop().split(".").shift(),r])),n=a.icon&&([e,o]=ne(()=>{var t;return(t=s==null?void 0:s[a.icon])==null?void 0:t.call(s)}),e=await e,o(),e);return(t,r)=>w(n)?(l(),h("div",{key:0,innerHTML:w(n),class:"base-icon"},null,8,ue)):B("",!0)}}),W=b(de,[["__scopeId","data-v-e37e1e8d"]]),_e={class:"base-location-input"},pe=["id","value"],me=y({__name:"BaseLocationInput",props:{value:{type:String,default:""},google:{type:Object,required:!0},id:{type:String,default:"geocode"}},emits:["locationSelected"],setup(i,{emit:e}){const o=i,a=$(null),s={types:["geocode"],fields:["formatted_address","geometry","name","address_components"]};K(()=>{t()});const n=e;function t(){var u;const r=document.getElementById(o.id);a.value=new o.google.maps.places.Autocomplete(r,s),(u=a.value)==null||u.addListener("place_changed",()=>{var p,m,L;const _=(p=a.value)==null?void 0:p.getPlace();if(_){const g=(m=_.geometry)==null?void 0:m.location.lat(),S=(L=_.geometry)==null?void 0:L.location.lng();if(g&&S){const O=new J(g,S);n("locationSelected",O)}}})}return(r,u)=>{const _=W;return l(),h("div",_e,[c(_,{class:"icon-sxs secondary",icon:"search"}),E("input",{class:"input",id:i.id,value:i.value,type:"text",placeholder:"Zoek op locatie"},null,8,pe)])}}}),he=b(me,[["__scopeId","data-v-a70ced63"]]);function fe(i,e,o,a){function s(n){return n instanceof o?n:new o(function(t){t(n)})}return new(o||(o=Promise))(function(n,t){function r(p){try{_(a.next(p))}catch(m){t(m)}}function u(p){try{_(a.throw(p))}catch(m){t(m)}}function _(p){p.done?n(p.value):s(p.value).then(r,u)}_((a=a.apply(i,[])).next())})}function ge(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ve=function i(e,o){if(e===o)return!0;if(e&&o&&typeof e=="object"&&typeof o=="object"){if(e.constructor!==o.constructor)return!1;var a,s,n;if(Array.isArray(e)){if(a=e.length,a!=o.length)return!1;for(s=a;s--!==0;)if(!i(e[s],o[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if(n=Object.keys(e),a=n.length,a!==Object.keys(o).length)return!1;for(s=a;s--!==0;)if(!Object.prototype.hasOwnProperty.call(o,n[s]))return!1;for(s=a;s--!==0;){var t=n[s];if(!i(e[t],o[t]))return!1}return!0}return e!==e&&o!==o},ye=ge(ve);const Z="__googleMapsScriptId";var D;(function(i){i[i.INITIALIZED=0]="INITIALIZED",i[i.LOADING=1]="LOADING",i[i.SUCCESS=2]="SUCCESS",i[i.FAILURE=3]="FAILURE"})(D||(D={}));class R{constructor({apiKey:e,authReferrerPolicy:o,channel:a,client:s,id:n=Z,language:t,libraries:r=[],mapIds:u,nonce:_,region:p,retries:m=3,url:L="https://maps.googleapis.com/maps/api/js",version:g}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=o,this.channel=a,this.client=s,this.id=n||Z,this.language=t,this.libraries=r,this.mapIds=u,this.nonce=_,this.region=p,this.retries=m,this.url=L,this.version=g,R.instance){if(!ye(this.options,R.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(R.instance.options)}`);return R.instance}R.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?D.FAILURE:this.done?D.SUCCESS:this.loading?D.LOADING:D.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,o)=>{this.loadCallback(a=>{a?o(a.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,o;if(document.getElementById(this.id)){this.callback();return}const a={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(a).forEach(n=>!a[n]&&delete a[n]),!((o=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||o===void 0)&&o.importLibrary||(n=>{let t,r,u,_="The Google Maps JavaScript API",p="google",m="importLibrary",L="__ib__",g=document,S=window;S=S[p]||(S[p]={});const O=S.maps||(S.maps={}),F=new Set,C=new URLSearchParams,d=()=>t||(t=new Promise((f,I)=>fe(this,void 0,void 0,function*(){var A;yield r=g.createElement("script"),r.id=this.id,C.set("libraries",[...F]+"");for(u in n)C.set(u.replace(/[A-Z]/g,G=>"_"+G[0].toLowerCase()),n[u]);C.set("callback",p+".maps."+L),r.src=this.url+"?"+C,O[L]=f,r.onerror=()=>t=I(Error(_+" could not load.")),r.nonce=this.nonce||((A=g.querySelector("script[nonce]"))===null||A===void 0?void 0:A.nonce)||"",g.head.append(r)})));O[m]?console.warn(_+" only loads once. Ignoring:",n):O[m]=(f,...I)=>F.add(f)&&d().then(()=>O[m](f,...I))})(a);const s=this.libraries.map(n=>this.importLibrary(n));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),n=>{const t=new ErrorEvent("error",{error:n});this.loadErrorCallback(t)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const o=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${o} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},o)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const Q=y({__name:"GoogleMapLoader",setup(i){const e=z(),o=$(null);return K(async()=>{console.log("GoogleMapLoader mounted",e.public.GOOGLE_MAPS_API_KEY,e),o.value=await new R({libraries:["places","marker"],apiKey:e.public.GOOGLE_MAPS_API_KEY}).load().then()}),(a,s)=>(l(),h("div",null,[w(o)?T(a.$slots,"default",{key:0,google:w(o)}):B("",!0)]))}}),Le={class:"location-input"},Ie=y({__name:"LocationInput",props:{value:{type:String,default:""},id:{type:String,default:"location-input"}},emits:["locationSelected"],setup(i,{emit:e}){const o=e,a=s=>{o("locationSelected",s)};return(s,n)=>{const t=he,r=Q;return l(),h("div",Le,[c(r,null,{default:k(({google:u})=>[c(t,{onLocationSelected:a,value:i.value,google:u,id:i.id},null,8,["value","google","id"])]),_:1})])}}}),Ee=b(Ie,[["__scopeId","data-v-d2f7a307"]]),be={},we={class:"base-tag text-s"};function Se(i,e){return l(),h("div",we,[T(i.$slots,"default",{},void 0,!0)])}const X=b(be,[["render",Se],["__scopeId","data-v-65da5038"]]);var ee=(i=>(i.PRIVAAT="Privaat",i.PUBLIEK="Publiek",i.COMMERCIEEL="Commercieel",i.ONBEKEND="Onbekend",i))(ee||{});const $e=i=>{switch(i){case"COMERCIEEL":return"office";case"PRIVAAT":return"house";case"PUBLIEK":return"farm";default:return"other"}},ke={class:"filter-tabs"},Oe=y({__name:"FilterTabs",props:{modelValue:{}},emits:["update:modelValue","filterSelected"],setup(i,{emit:e}){const o=e,a=se(()=>Object.entries(ee).map(([n,t])=>({value:n,label:t})));function s(n){console.log("handleSelect",n),o("update:modelValue",n),o("filterSelected",n)}return(n,t)=>(l(),h("div",ke,[(l(!0),h(V,null,q(a.value,r=>(l(),j(X,{key:r.value,class:ae([["filter-tag",{active:n.modelValue===r.value}],"skewed"]),onClick:u=>s(r.value)},{default:k(()=>[x(P(r.label),1)]),_:2},1032,["class","onClick"]))),128))]))}}),Ae=b(Oe,[["__scopeId","data-v-12c30a7a"]]),Pe={};function Ce(i,e){return l(),h("p",null,[T(i.$slots,"default",{},void 0,!0)])}const te=b(Pe,[["render",Ce],["__scopeId","data-v-4efd3f75"]]),Re={class:"location-header"},xe={class:"flex-column"},Me={class:"location-tags flex-row"},De=y({__name:"LocationListItem",props:{location:{}},emits:["locationSelected"],setup(i,{emit:e}){const o=r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase(),{$relativeTime:a}=Y(),s=i,n=e,t=()=>{n("locationSelected",s.location.latLng)};return(r,u)=>{const _=W,p=te,m=X;return l(),h("div",{class:"location-list-item",onClick:t},[E("div",Re,[c(_,{class:"icon-l secondary",icon:w($e)(r.location.type.toString())},null,8,["icon"]),E("div",xe,[c(p,{class:"text-primary bold"},{default:k(()=>[x(P(r.location.address),1)]),_:1}),c(p,{class:"text-grey text-s"},{default:k(()=>[x(P(r.location.city),1)]),_:1})])]),E("div",Me,[c(p,{class:"text-black text-s flex-row icon-text"},{default:k(()=>[c(_,{icon:"calendar",class:"secondary icon-xs"}),x(" "+P(w(a)(r.location.createdAt.toDate())),1)]),_:1}),c(m,null,{default:k(()=>[x(P(o(r.location.type)),1)]),_:1})])])}}}),oe=b(De,[["__scopeId","data-v-21717317"]]),Te={class:"location-list"},Be=y({__name:"LocationList",props:{locations:{}},emits:["locationSelected"],setup(i,{emit:e}){const o=e,a=s=>{o("locationSelected",s)};return(s,n)=>{const t=oe;return l(),h("div",Te,[(l(!0),h(V,null,q(s.locations,r=>(l(),j(t,{key:r.latLng.latitude+","+r.latLng.longitude,location:r,onLocationSelected:a},null,8,["location"]))),128))])}}}),Ve=b(Be,[["__scopeId","data-v-6d9fb022"]]),je={class:"button"},Fe=y({__name:"BaseButton",props:{icon:{}},setup(i){return(e,o)=>{const a=W;return l(),h("button",je,[e.icon?(l(),j(a,{key:0,icon:e.icon,class:"button-icon"},null,8,["icon"])):B("",!0),T(e.$slots,"default",{},void 0,!0)])}}}),Ge=b(Fe,[["__scopeId","data-v-385ac23b"]]),Ne=["src"],Ue=y({__name:"BaseImage",props:{image:{}},setup(i){return(e,o)=>(l(),h("img",{class:"base-image",src:e.image},null,8,Ne))}}),Ke=y({__name:"LocationCard",props:{location:{}},emits:["locationSelected"],setup(i,{emit:e}){const o=i,a=e,s=()=>{a("locationSelected",o.location.latLng)},n=`https://maps.googleapis.com/maps/api/streetview?size=600x400&key=AIzaSyDx3x7OILDe1wWmng_pllwoxrH2mlqekCI&location=${o.location.latLng.latitude},${o.location.latLng.longitude}`;return(t,r)=>{const u=Ue,_=oe;return l(),h("div",{class:"location-card",onClick:s},[c(u,{image:n,alt:"Location Street View",class:"location-image"}),c(_,{location:t.location},null,8,["location"])])}}}),qe=b(Ke,[["__scopeId","data-v-c7b49f84"]]),We={class:"location-slider"},ze=y({__name:"LocationSlider",props:{locations:{}},emits:["locationSelected"],setup(i,{emit:e}){const o=e,a=s=>{o("locationSelected",s)};return(s,n)=>{const t=qe;return l(),h("div",We,[(l(!0),h(V,null,q(s.locations,r=>(l(),j(t,{key:r.latLng.latitude+","+r.latLng.longitude,location:r,onLocationSelected:a},null,8,["location"]))),128))])}}}),He=b(ze,[["__scopeId","data-v-1b7f3f9e"]]),Ze={class:"location-info-window"},Je=y({__name:"LocationInfoWindow",props:{location:{}},setup(i){return(e,o)=>{const a=te;return l(),h("div",Ze,[c(a,null,{default:k(()=>[x(P(e.location.address),1)]),_:1}),c(a,null,{default:k(()=>[x("Latitude: "+P(e.location.latitude)+", Longitude: "+P(e.location.longitude),1)]),_:1})])}}}),Ye=b(Je,[["__scopeId","data-v-7cde891d"]]),Qe={key:0},Xe=y({__name:"BaseMarker",props:{map:{},position:{},title:{}},setup(i){const e=i,o=$(null),s=z().app.baseURL||"/",n=document.createElement("img");n.src=`${s}icons/marker.svg`.replace("//","/"),n.style.width="30px",n.style.height="30px";const t=new google.maps.Marker({map:e.map,position:{lat:e.position.lat,lng:e.position.lng},icon:n.src}),r=new google.maps.InfoWindow({disableAutoPan:!0});return t.addListener("click",()=>{r.close(),o.value instanceof HTMLElement&&r.setContent(o.value),r.open(e.map,t)}),(u,_)=>u.map?(l(),h("div",Qe,[E("div",{ref_key:"infoWindowRef",ref:o},[T(u.$slots,"default")],512)])):B("",!0)}}),et=y({__name:"BaseMap",props:{google:{},mapConfig:{},center:{}},setup(i){const e=i,o=$(null),a=$(null);return K(async()=>{try{a.value=new e.google.maps.Map(o.value,e.mapConfig)}catch(s){console.error("Error aloading map: ",s)}}),ie(()=>e.center,s=>{console.log("newCenter",s),a.value&&a.value.panTo(s)},{deep:!0}),(s,n)=>(l(),h(V,null,[E("div",{ref_key:"mapContainer",ref:o,class:"map"},null,512),w(a)?T(s.$slots,"default",{key:0,map:w(a)},void 0,!0):B("",!0)],64))}}),tt=b(et,[["__scopeId","data-v-7b8c1f86"]]),ot={class:"full-width"},nt=y({__name:"LocationMap",props:{locations:{},center:{}},setup(i){const e=i,o=$(null),a=z(),s={center:{lat:e.center.latitude,lng:e.center.longitude},mapId:a.public.GOOGLE_MAPS_MAP_ID,zoom:12,disableDefaultUI:!0};return K(()=>{console.log(o.value)}),(n,t)=>{const r=Ye,u=Xe,_=tt,p=Q;return l(),h("div",ot,[c(p,null,{default:k(({google:m})=>[c(_,{google:m,mapConfig:s,center:{lat:n.center.latitude,lng:n.center.longitude}},{default:k(({map:L})=>[(l(!0),h(V,null,q(n.locations,g=>(l(),j(u,{map:L,google:m,position:{lat:g.latLng.latitude,lng:g.latLng.longitude},title:g.address,key:g.id},{default:k(()=>[c(r,{location:g},null,8,["location"])]),_:2},1032,["map","google","position","title"]))),128))]),_:2},1032,["google","center"])]),_:1})])}}}),st={class:"index"},at={class:"map-overlay"},it={class:"sidebar"},rt={class:"flex-row"},ct={class:"top-bar"},lt={class:"info-buttons"},ut={class:"bottom-bar"},pt=y({__name:"index",setup(i){var C;const e=re(),o=ce(),{$firestore:a}=Y();le({title:"Wasted Spaces",meta:[{name:"",content:""}]});let s=$([]);const n=$([]),t=$(new J(51.9146308,4.4709485)),r=$(((C=o.query.filter)==null?void 0:C.toString().toUpperCase())||null),u=$(50),_=async()=>{try{s.value=await a.getLocations(),console.log("currentFilter",r.value),n.value=L(s.value),console.log("currentLocations",n.value),console.log("currentFilter",typeof r.value),n.value=g(n.value,r.value)}catch(d){console.error("Error fetching locations:",d)}};function p(d,f,I,A){const N=m(I-d),M=m(A-f),U=Math.sin(N/2)*Math.sin(N/2)+Math.cos(m(d))*Math.cos(m(I))*Math.sin(M/2)*Math.sin(M/2);return 6371*(2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U)))}function m(d){return d*(Math.PI/180)}const L=d=>d.map(f=>({...f,distance:p(t.value.latitude,t.value.longitude,f.latLng.latitude,f.latLng.longitude)})).filter(f=>f.distance<=u.value).sort((f,I)=>f.distance-I.distance),g=(d,f)=>f?d.filter(I=>I.type===f):d,S=d=>{console.log("handleLocationSelected",d),t.value=d},O=d=>{t.value=d,n.value=L(s.value)},F=d=>{r.value=d,e.push({query:{...o.query,filter:(d==null?void 0:d.toString().toLowerCase())||void 0}}),n.value=L(s.value),n.value=g(n.value,d)};return _(),(d,f)=>{const I=W,A=Ee,G=Ae,N=Ve,M=Ge,U=He,H=nt;return l(),h("div",st,[E("div",at,[E("div",it,[E("div",rt,[c(I,{class:"logo icon-lxl",icon:"logo_standalone_red"}),c(I,{class:"logo",icon:"logo_text_long"})]),c(A,{class:"mt-1-0",id:"sidebar-input",onLocationSelected:O}),c(G,{class:"mt-1-0",modelValue:"currentFilter",onFilterSelected:F}),c(N,{locations:w(n),class:"mt-1-0",onLocationSelected:S},null,8,["locations"])]),E("div",ct,[c(A,{id:"topbar-input",onLocationSelected:O})]),E("div",lt,[E("div",null,[c(M,{class:"primary-inverted",icon:"documents"}),c(M,{class:"primary-inverted mt-0-5",icon:"info"})]),c(M,{class:"primary-inverted",icon:"add"})]),E("div",ut,[c(U,{locations:w(n),onLocationSelected:S},null,8,["locations"])])]),c(H,{class:"map",locations:w(n),center:w(t)},null,8,["locations","center"])])}}});export{pt as default};
