import{d as b,C as I,D as fe,E as V,t as r,v as p,F as A,_ as L,y as x,r as y,o as H,G as Z,z as c,x as v,H as B,l as J,I as D,A as S,c as ge,J as q,K as F,B as R,L as Y,m as Q,M as se,T as oe,N as ve,u as ye,O as be}from"./CzlJR5N8.js";import{u as Le}from"./NTJd-WPc.js";const Ie=["innerHTML"],$e=b({__name:"BaseIcon",props:{icon:{}},async setup(t){let e,o;const l=t,a=Object.fromEntries(Object.entries(Object.assign({"/assets/icons/add.svg":()=>I(()=>import("./BiKgAjhi.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/calendar.svg":()=>I(()=>import("./DrqZ3LR8.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/close.svg":()=>I(()=>import("./TfD_I-fS.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/documents.svg":()=>I(()=>import("./DOO1Ge5l.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/farm.svg":()=>I(()=>import("./0PHxwUTU.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/house.svg":()=>I(()=>import("./BtkviBJP.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/industry.svg":()=>I(()=>import("./BKUyxpaI.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/info.svg":()=>I(()=>import("./CZ-SqL3D.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/logo_standalone.svg":()=>I(()=>import("./B3A4rG9H.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/logo_standalone_red.svg":()=>I(()=>import("./CaUd5saq.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/logo_text.svg":()=>I(()=>import("./DF4MJzAr.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/logo_text_long.svg":()=>I(()=>import("./BUFqeKC3.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/logo_white.svg":()=>I(()=>import("./_bgolDXl.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/office.svg":()=>I(()=>import("./DRdKqeIu.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/other.svg":()=>I(()=>import("./BGeYsIfF.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/search.svg":()=>I(()=>import("./CF8Xzspr.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/shop.svg":()=>I(()=>import("./ClPQWvmX.js"),[],import.meta.url).then(n=>n.default)})).map(([n,i])=>[n.split("/").pop().split(".").shift(),i])),s=l.icon&&([e,o]=fe(()=>{var n;return(n=a==null?void 0:a[l.icon])==null?void 0:n.call(a)}),e=await e,o(),e);return(n,i)=>V(s)?(r(),p("div",{key:0,innerHTML:V(s),class:"base-icon"},null,8,Ie)):A("",!0)}}),W=L($e,[["__scopeId","data-v-1b4bfc6c"]]),Ee=["for"],Se={__name:"BaseLabel",props:{label:{type:String,default:""},for:{type:String,default:""}},setup(t){return(e,o)=>t.label?(r(),p("label",{key:0,for:t.for,class:"base-label"},x(t.label),9,Ee)):A("",!0)}},X=L(Se,[["__scopeId","data-v-b540a465"]]),we={class:"base-location-input"},ke=["id","value"],Ve=b({__name:"BaseLocationInput",props:{modelValue:{type:String,default:""},google:{type:Object,required:!0},id:{type:String,default:"geocode"}},emits:["update:modelValue","locationSelected"],setup(t,{emit:e}){const o=t,l=e,a=y(null),s={types:["geocode"],fields:["formatted_address","geometry","name","address_components"]};H(()=>{n()});function n(){var u;const i=document.getElementById(o.id);a.value=new o.google.maps.places.Autocomplete(i,s),(u=a.value)==null||u.addListener("place_changed",()=>{var m,f,E;const _=(m=a.value)==null?void 0:m.getPlace();if(_){const d=(f=_.geometry)==null?void 0:f.location.lat(),w=(E=_.geometry)==null?void 0:E.location.lng();if(d&&w){const C=new Z(d,w);l("locationSelected",C),l("update:modelValue",_.formatted_address||"")}}})}return(i,u)=>{const _=W;return r(),p("div",we,[c(_,{class:"icon-sxs secondary",icon:"search"}),v("input",{class:"input",id:t.id,value:t.modelValue,type:"text",placeholder:"Zoek op locatie",onInput:u[0]||(u[0]=m=>i.$emit("update:modelValue",m.target.value))},null,40,ke)])}}}),Ce=L(Ve,[["__scopeId","data-v-cc2a0b7c"]]);function Oe(t,e,o,l){function a(s){return s instanceof o?s:new o(function(n){n(s)})}return new(o||(o=Promise))(function(s,n){function i(m){try{_(l.next(m))}catch(f){n(f)}}function u(m){try{_(l.throw(m))}catch(f){n(f)}}function _(m){m.done?s(m.value):a(m.value).then(i,u)}_((l=l.apply(t,[])).next())})}function xe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ae=function t(e,o){if(e===o)return!0;if(e&&o&&typeof e=="object"&&typeof o=="object"){if(e.constructor!==o.constructor)return!1;var l,a,s;if(Array.isArray(e)){if(l=e.length,l!=o.length)return!1;for(a=l;a--!==0;)if(!t(e[a],o[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if(s=Object.keys(e),l=s.length,l!==Object.keys(o).length)return!1;for(a=l;a--!==0;)if(!Object.prototype.hasOwnProperty.call(o,s[a]))return!1;for(a=l;a--!==0;){var n=s[a];if(!t(e[n],o[n]))return!1}return!0}return e!==e&&o!==o},Pe=xe(Ae);const ne="__googleMapsScriptId";var j;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(j||(j={}));class T{constructor({apiKey:e,authReferrerPolicy:o,channel:l,client:a,id:s=ne,language:n,libraries:i=[],mapIds:u,nonce:_,region:m,retries:f=3,url:E="https://maps.googleapis.com/maps/api/js",version:d}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=o,this.channel=l,this.client=a,this.id=s||ne,this.language=n,this.libraries=i,this.mapIds=u,this.nonce=_,this.region=m,this.retries=f,this.url=E,this.version=d,T.instance){if(!Pe(this.options,T.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(T.instance.options)}`);return T.instance}T.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?j.FAILURE:this.done?j.SUCCESS:this.loading?j.LOADING:j.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,o)=>{this.loadCallback(l=>{l?o(l.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,o;if(document.getElementById(this.id)){this.callback();return}const l={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(l).forEach(s=>!l[s]&&delete l[s]),!((o=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||o===void 0)&&o.importLibrary||(s=>{let n,i,u,_="The Google Maps JavaScript API",m="google",f="importLibrary",E="__ib__",d=document,w=window;w=w[m]||(w[m]={});const C=w.maps||(w.maps={}),M=new Set,P=new URLSearchParams,O=()=>n||(n=new Promise((h,g)=>Oe(this,void 0,void 0,function*(){var k;yield i=d.createElement("script"),i.id=this.id,P.set("libraries",[...M]+"");for(u in s)P.set(u.replace(/[A-Z]/g,U=>"_"+U[0].toLowerCase()),s[u]);P.set("callback",m+".maps."+E),i.src=this.url+"?"+P,C[E]=h,i.onerror=()=>n=g(Error(_+" could not load.")),i.nonce=this.nonce||((k=d.querySelector("script[nonce]"))===null||k===void 0?void 0:k.nonce)||"",d.head.append(i)})));C[f]?console.warn(_+" only loads once. Ignoring:",s):C[f]=(h,...g)=>M.add(h)&&O().then(()=>C[f](h,...g))})(l);const a=this.libraries.map(s=>this.importLibrary(s));a.length||a.push(this.importLibrary("core")),Promise.all(a).then(()=>this.callback(),s=>{const n=new ErrorEvent("error",{error:s});this.loadErrorCallback(n)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const o=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${o} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},o)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const le=b({__name:"GoogleMapLoader",setup(t){const e=J(),o=y(null);return H(async()=>{o.value=await new T({libraries:["places","marker"],apiKey:e.public.GOOGLE_MAPS_API_KEY}).load().then()}),(l,a)=>(r(),p("div",null,[V(o)?B(l.$slots,"default",{key:0,google:V(o)}):A("",!0)]))}}),Re={class:"location-input"},ie=b({__name:"LocationInput",props:{modelValue:{type:String,default:""},id:{type:String,default:"location-input"},label:{type:String,default:""}},emits:["update:modelValue","locationSelected"],setup(t,{emit:e}){const o=e,l=a=>{o("locationSelected",a)};return(a,s)=>{const n=X,i=Ce,u=le;return r(),p("div",Re,[t.label?(r(),D(n,{key:0,label:t.label,for:t.id},null,8,["label","for"])):A("",!0),c(u,null,{default:S(({google:_})=>[c(i,{modelValue:t.modelValue,"onUpdate:modelValue":s[0]||(s[0]=m=>a.$emit("update:modelValue",m)),onLocationSelected:l,google:_,id:t.id},null,8,["modelValue","google","id"])]),_:1})])}}}),De={},Be={class:"base-tag text-s"};function Me(t,e){return r(),p("div",Be,[B(t.$slots,"default",{},void 0,!0)])}const re=L(De,[["render",Me],["__scopeId","data-v-65da5038"]]);var ce=(t=>(t.PRIVAAT="Privaat",t.PUBLIEK="Publiek",t.COMMERCIEEL="Commercieel",t.ONBEKEND="Onbekend",t))(ce||{});const Te=t=>{switch(t){case"COMERCIEEL":return"office";case"PRIVAAT":return"house";case"PUBLIEK":return"farm";default:return"other"}},Ue={class:"filter-tabs"},Ne=b({__name:"FilterTabs",props:{modelValue:{}},emits:["update:modelValue","filterSelected"],setup(t,{emit:e}){const o=e,l=ge(()=>Object.entries(ce).map(([s,n])=>({value:s,label:n})));function a(s){console.log("handleSelect",s),o("update:modelValue",s),o("filterSelected",s)}return(s,n)=>(r(),p("div",Ue,[(r(!0),p(q,null,F(l.value,i=>(r(),D(re,{key:i.value,class:Y([["filter-tag",{active:s.modelValue===i.value}],"skewed"]),onClick:u=>a(i.value)},{default:S(()=>[R(x(i.label),1)]),_:2},1032,["class","onClick"]))),128))]))}}),je=L(Ne,[["__scopeId","data-v-12c30a7a"]]),qe={};function Fe(t,e){return r(),p("p",null,[B(t.$slots,"default",{},void 0,!0)])}const ue=L(qe,[["render",Fe],["__scopeId","data-v-4efd3f75"]]),Ge={class:"location-header"},Ke={class:"flex-column"},He={class:"location-tags flex-row"},We=b({__name:"LocationListItem",props:{location:{}},emits:["locationSelected"],setup(t,{emit:e}){const o=i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase(),{$relativeTime:l}=Q(),a=t,s=e,n=()=>{s("locationSelected",a.location.latLng)};return(i,u)=>{const _=W,m=ue,f=re;return r(),p("div",{class:"location-list-item",onClick:n},[v("div",Ge,[c(_,{class:"icon-l secondary",icon:V(Te)(i.location.type.toString())},null,8,["icon"]),v("div",Ke,[c(m,{class:"text-primary bold"},{default:S(()=>[R(x(i.location.address),1)]),_:1}),c(m,{class:"text-grey text-s"},{default:S(()=>[R(x(i.location.city),1)]),_:1})])]),v("div",He,[c(m,{class:"text-black text-s flex-row icon-text"},{default:S(()=>[c(_,{icon:"calendar",class:"secondary icon-xs"}),R(" "+x(V(l)(i.location.createdAt.toDate())),1)]),_:1}),c(f,null,{default:S(()=>[R(x(o(i.location.type)),1)]),_:1})])])}}}),de=L(We,[["__scopeId","data-v-21717317"]]),ze={class:"location-list"},Ze=b({__name:"LocationList",props:{locations:{}},emits:["locationSelected"],setup(t,{emit:e}){const o=e,l=a=>{o("locationSelected",a)};return(a,s)=>{const n=de;return r(),p("div",ze,[(r(!0),p(q,null,F(a.locations,i=>(r(),D(n,{key:i.latLng.latitude+","+i.latLng.longitude,location:i,onLocationSelected:l},null,8,["location"]))),128))])}}}),Je=L(Ze,[["__scopeId","data-v-fd2fdb41"]]),Ye=b({__name:"BaseButton",props:{icon:{}},setup(t){return(e,o)=>{const l=W;return r(),p("button",{class:Y(["button",{icon:e.icon}])},[e.icon?(r(),D(l,{key:0,icon:e.icon,class:"button-icon"},null,8,["icon"])):A("",!0),B(e.$slots,"default",{},void 0,!0)],2)}}}),pe=L(Ye,[["__scopeId","data-v-9e7c4164"]]),Qe=["src"],Xe=b({__name:"BaseImage",props:{image:{}},setup(t){return(e,o)=>(r(),p("img",{class:"base-image",src:e.image},null,8,Qe))}}),et=b({__name:"LocationCard",props:{location:{}},emits:["locationSelected"],setup(t,{emit:e}){const o=t,l=e,a=()=>{l("locationSelected",o.location.latLng)},s=`https://maps.googleapis.com/maps/api/streetview?size=600x400&key=AIzaSyDx3x7OILDe1wWmng_pllwoxrH2mlqekCI&location=${o.location.latLng.latitude},${o.location.latLng.longitude}`;return(n,i)=>{const u=Xe,_=de;return r(),p("div",{class:"location-card",onClick:a},[c(u,{image:s,alt:"Location Street View",class:"location-image"}),c(_,{location:n.location},null,8,["location"])])}}}),tt=L(et,[["__scopeId","data-v-c7b49f84"]]),ot={class:"location-slider"},nt=b({__name:"LocationSlider",props:{locations:{}},emits:["locationSelected"],setup(t,{emit:e}){const o=e,l=a=>{o("locationSelected",a)};return(a,s)=>{const n=tt;return r(),p("div",ot,[(r(!0),p(q,null,F(a.locations,i=>(r(),D(n,{key:i.latLng.latitude+","+i.latLng.longitude,location:i,onLocationSelected:l},null,8,["location"]))),128))])}}}),at=L(nt,[["__scopeId","data-v-1b7f3f9e"]]),st={};function lt(t,e){return r(),p("h2",null,[B(t.$slots,"default",{},void 0,!0)])}const it=L(st,[["render",lt],["__scopeId","data-v-e5659f20"]]),rt={class:"base-select-wrapper"},ct=["multiple","disabled","required","name","id","autocomplete","value"],ut={key:0,value:"",disabled:"",selected:"",hidden:""},dt=["value"],pt={__name:"BaseSelect",props:{modelValue:[String,Number,Array],options:{type:Array,required:!0},multiple:Boolean,placeholder:String,disabled:Boolean,required:Boolean,name:String,id:String,class:String,autocomplete:String,label:{type:String,default:""}},emits:["update:modelValue"],setup(t){return(e,o)=>{const l=X;return r(),p("div",rt,[t.label?(r(),D(l,{key:0,label:t.label,for:t.id},null,8,["label","for"])):A("",!0),v("select",se({class:"base-select"},e.$attrs,{multiple:t.multiple,disabled:t.disabled,required:t.required,name:t.name,id:t.id,autocomplete:t.autocomplete,value:t.modelValue,onChange:o[0]||(o[0]=a=>e.$emit("update:modelValue",t.multiple?[...a.target.selectedOptions].map(s=>s.value):a.target.value))}),[t.placeholder?(r(),p("option",ut,x(t.placeholder),1)):A("",!0),(r(!0),p(q,null,F(t.options,(a,s)=>(r(),p("option",{key:s,value:a.value},x(a.label),9,dt))),128))],16,ct)])}}},mt=L(pt,[["__scopeId","data-v-1a704583"]]),_t=["value","name","id","required","disabled","min","max"],ht={__name:"BaseDatePicker",props:{modelValue:String,name:String,id:String,class:String,required:Boolean,disabled:Boolean,min:Number,max:Number,label:{type:String,default:""}},emits:["update:modelValue"],setup(t){return(e,o)=>{const l=X;return r(),p("div",{class:Y(["base-date-picker-wrapper",e.$attrs.class])},[t.label?(r(),D(l,{key:0,label:t.label,for:t.id},null,8,["label","for"])):A("",!0),v("input",se({class:"base-date-picker"},e.$attrs,{type:"date",value:t.modelValue,name:t.name,id:t.id,required:t.required,disabled:t.disabled,min:t.min,max:t.max,onInput:o[0]||(o[0]=a=>e.$emit("update:modelValue",a.target.value))}),null,16,_t)],2)}}},ft=L(ht,[["__scopeId","data-v-353bfc05"]]),$=[];for(let t=0;t<256;++t)$.push((t+256).toString(16).slice(1));function gt(t,e=0){return($[t[e+0]]+$[t[e+1]]+$[t[e+2]]+$[t[e+3]]+"-"+$[t[e+4]]+$[t[e+5]]+"-"+$[t[e+6]]+$[t[e+7]]+"-"+$[t[e+8]]+$[t[e+9]]+"-"+$[t[e+10]]+$[t[e+11]]+$[t[e+12]]+$[t[e+13]]+$[t[e+14]]+$[t[e+15]]).toLowerCase()}let z;const vt=new Uint8Array(16);function yt(){if(!z){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");z=crypto.getRandomValues.bind(crypto)}return z(vt)}const bt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ae={randomUUID:bt};function Lt(t,e,o){var a;if(ae.randomUUID&&!e&&!t)return ae.randomUUID();t=t||{};const l=t.random??((a=t.rng)==null?void 0:a.call(t))??yt();if(l.length<16)throw new Error("Random bytes length must be >= 16");return l[6]=l[6]&15|64,l[8]=l[8]&63|128,gt(l)}const It={class:"location-create"},$t={class:"location-create-header"},Et={class:"location-create-form"},St={class:"row"},wt=b({__name:"LocationCreate",emits:["closeLocationCreate"],setup(t,{emit:e}){const o=e,{$firestore:l}=Q(),a=y(""),s=y(""),n=y(""),i=y(""),u=y([{value:"PRIVATE",label:"Private"},{value:"PUBLIC",label:"Public"},{value:"COMMERCIAL",label:"Commercial"},{value:"UNKNOWN",label:"Unknown"}]),_=y([{value:"house",label:"House"},{value:"apartment",label:"Apartment"},{value:"store",label:"Store"},{value:"office",label:"Office"}]),m=()=>{o("closeLocationCreate")},f=()=>{console.log({address:a.value,date:s.value,type:n.value,ownership:i.value}),l.addLocation({id:Lt(),type:n.value,vacatedSince:new Date(s.value),city:"Den Haag",latLng:new Z(52.0777,4.3167),address:a.value,createdAt:oe.fromDate(new Date),updatedAt:oe.fromDate(new Date)}),o("closeLocationCreate")};return(E,d)=>{const w=it,C=pe,M=ie,P=mt;return r(),p("div",It,[v("div",$t,[c(w,{class:"text-xl"},{default:S(()=>d[4]||(d[4]=[R("MELD LEEGSTAND")])),_:1}),c(C,{onClick:m,icon:"close",class:"icon-sm primary-inverted"})]),v("div",Et,[c(M,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=O=>a.value=O),id:"location-create-input",label:"Address"},null,8,["modelValue"]),c(ft,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=O=>s.value=O),label:"Datum van leegstand",max:Date.now()},null,8,["modelValue","max"]),v("div",St,[c(P,{modelValue:n.value,"onUpdate:modelValue":d[2]||(d[2]=O=>n.value=O),label:"Type",options:_.value},null,8,["modelValue","options"]),c(P,{modelValue:i.value,"onUpdate:modelValue":d[3]||(d[3]=O=>i.value=O),label:"Ownership",options:u.value},null,8,["modelValue","options"])]),c(C,{onClick:f,class:"submit primary-inverted mt-1-5"},{default:S(()=>d[5]||(d[5]=[R(" Melden ")])),_:1})])])}}}),kt=L(wt,[["__scopeId","data-v-8025d9d3"]]),Vt={class:"base-overlay"},Ct={class:"overlay-content"},Ot=b({__name:"BaseOverlay",setup(t){return(e,o)=>(r(),p("div",Vt,[v("div",Ct,[B(e.$slots,"default",{},void 0,!0)])]))}}),xt=L(Ot,[["__scopeId","data-v-6a8ea68d"]]),At={class:"location-info-window"},Pt=b({__name:"LocationInfoWindow",props:{location:{}},setup(t){return(e,o)=>{const l=ue;return r(),p("div",At,[c(l,null,{default:S(()=>[R(x(e.location.address),1)]),_:1}),c(l,null,{default:S(()=>[R("Latitude: "+x(e.location.latitude)+", Longitude: "+x(e.location.longitude),1)]),_:1})])}}}),Rt=L(Pt,[["__scopeId","data-v-7cde891d"]]),Dt={key:0},Bt=b({__name:"BaseMarker",props:{map:{},position:{},title:{}},setup(t){const e=t,o=y(null),a=J().app.baseURL||"/",s=document.createElement("img");s.src=`${a}icons/marker.svg`.replace("//","/"),s.style.width="30px",s.style.height="30px";const n=new google.maps.Marker({map:e.map,position:{lat:e.position.lat,lng:e.position.lng},icon:s.src}),i=new google.maps.InfoWindow({disableAutoPan:!0});return n.addListener("click",()=>{i.close(),o.value instanceof HTMLElement&&i.setContent(o.value),i.open(e.map,n)}),(u,_)=>u.map?(r(),p("div",Dt,[v("div",{ref_key:"infoWindowRef",ref:o},[B(u.$slots,"default")],512)])):A("",!0)}}),Mt=b({__name:"BaseMap",props:{google:{},mapConfig:{},center:{}},setup(t){const e=t,o=y(null),l=y(null);return H(async()=>{try{l.value=new e.google.maps.Map(o.value,e.mapConfig)}catch(a){console.error("Error aloading map: ",a)}}),ve(()=>e.center,a=>{console.log("newCenter",a),l.value&&l.value.panTo(a)},{deep:!0}),(a,s)=>(r(),p(q,null,[v("div",{ref_key:"mapContainer",ref:o,class:"map"},null,512),V(l)?B(a.$slots,"default",{key:0,map:V(l)},void 0,!0):A("",!0)],64))}}),Tt=L(Mt,[["__scopeId","data-v-aed6c815"]]),Ut={class:"full-width"},Nt=b({__name:"LocationMap",props:{locations:{},center:{}},setup(t){const e=t,o=y(null),l=J(),a={center:{lat:e.center.latitude,lng:e.center.longitude},mapId:l.public.GOOGLE_MAPS_MAP_ID,zoom:12,disableDefaultUI:!0};return H(()=>{console.log(o.value)}),(s,n)=>{const i=Rt,u=Bt,_=Tt,m=le;return r(),p("div",Ut,[c(m,null,{default:S(({google:f})=>[c(_,{google:f,mapConfig:a,center:{lat:s.center.latitude,lng:s.center.longitude}},{default:S(({map:E})=>[(r(!0),p(q,null,F(s.locations,d=>(r(),D(u,{map:E,google:f,position:{lat:d.latLng.latitude,lng:d.latLng.longitude},title:d.address,key:d.id},{default:S(()=>[c(i,{location:d},null,8,["location"])]),_:2},1032,["map","google","position","title"]))),128))]),_:2},1032,["google","center"])]),_:1})])}}}),jt={class:"index"},qt={class:"map-overlay"},Ft={class:"sidebar"},Gt={class:"flex-row"},Kt={class:"top-bar"},Ht={class:"info-buttons"},Wt={class:"bottom-bar"},Jt=b({__name:"index",setup(t){var O;const e=ye(),o=be(),{$firestore:l}=Q();Le({title:"Wasted Spaces",meta:[{name:"",content:""}]});let a=y([]);const s=y([]),n=y(!1),i=y(new Z(51.9146308,4.4709485)),u=y(((O=o.query.filter)==null?void 0:O.toString().toUpperCase())||null),_=y(50),m=async()=>{try{a.value=await l.getLocations(),console.log("currentFilter",u.value),s.value=d(a.value),console.log("currentLocations",s.value),console.log("currentFilter",typeof u.value),s.value=w(s.value,u.value)}catch(h){console.error("Error fetching locations:",h)}};function f(h,g,k,U){const G=E(k-h),N=E(U-g),K=Math.sin(G/2)*Math.sin(G/2)+Math.cos(E(h))*Math.cos(E(k))*Math.sin(N/2)*Math.sin(N/2);return 6371*(2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K)))}function E(h){return h*(Math.PI/180)}const d=h=>h.map(g=>({...g,distance:f(i.value.latitude,i.value.longitude,g.latLng.latitude,g.latLng.longitude)})).filter(g=>g.distance<=_.value).sort((g,k)=>g.distance-k.distance),w=(h,g)=>g?h.filter(k=>k.type===g):h,C=h=>{console.log("handleLocationSelected",h),i.value=h},M=h=>{i.value=h,s.value=d(a.value)},P=h=>{u.value=h,e.push({query:{...o.query,filter:(h==null?void 0:h.toString().toLowerCase())||void 0}}),s.value=d(a.value),s.value=w(s.value,h)};return m(),(h,g)=>{const k=W,U=ie,ee=je,G=Je,N=pe,K=at,te=kt,me=xt,_e=Nt;return r(),p("div",jt,[v("div",qt,[v("div",Ft,[v("div",Gt,[c(k,{class:"logo icon-lxl",icon:"logo_standalone_red"}),c(k,{class:"logo",icon:"logo_text_long"})]),c(U,{class:"mt-1-0",id:"sidebar-input",onLocationSelected:M}),c(ee,{class:"mt-1-0",modelValue:"currentFilter",onFilterSelected:P}),c(G,{locations:V(s),class:"mt-1-0",onLocationSelected:C},null,8,["locations"])]),v("div",Kt,[c(U,{id:"topbar-input",onLocationSelected:M})]),v("div",Ht,[v("div",null,[c(N,{class:"primary-inverted",icon:"documents"}),c(N,{class:"primary-inverted mt-0-5",icon:"info"})]),c(N,{class:"primary-inverted",icon:"add",onClick:g[0]||(g[0]=he=>n.value=!0)})]),v("div",Wt,[c(K,{locations:V(s),onLocationSelected:C},null,8,["locations"])])]),V(n)?(r(),D(me,{key:0},{default:S(()=>[c(te,{onCloseLocationCreate:g[1]||(g[1]=he=>n.value=!1)})]),_:1})):A("",!0),c(_e,{class:"map",locations:V(s),center:V(i)},null,8,["locations","center"])])}}});export{Jt as default};
