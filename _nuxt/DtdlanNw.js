import{d as g,C as f,D as Y,E as I,t as d,v as m,F as P,_ as L,r as b,o as R,G as K,z as _,x as y,H as x,l as F,A as w,B as k,y as S,m as W,I as D,J as G,K as B,L as Q}from"./BPRahX3j.js";import{u as X}from"./ojzP9Oyy.js";const ee=["innerHTML"],te=g({__name:"BaseIcon",props:{icon:{}},async setup(a){let e,o;const n=a,s=Object.fromEntries(Object.entries(Object.assign({"/assets/icons/add.svg":()=>f(()=>import("./cRUi5Wbx.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/calendar.svg":()=>f(()=>import("./DrqZ3LR8.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/documents.svg":()=>f(()=>import("./D0EcyRd7.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/farm.svg":()=>f(()=>import("./0PHxwUTU.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/house.svg":()=>f(()=>import("./BtkviBJP.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/industry.svg":()=>f(()=>import("./BKUyxpaI.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/info.svg":()=>f(()=>import("./C1Nw4fO-.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_standalone.svg":()=>f(()=>import("./C_pHScIm.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_standalone_red.svg":()=>f(()=>import("./CaUd5saq.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_text.svg":()=>f(()=>import("./DF4MJzAr.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_text_long.svg":()=>f(()=>import("./BmBUCIcV.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/logo_white.svg":()=>f(()=>import("./CmpJqoP0.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/office.svg":()=>f(()=>import("./DRdKqeIu.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/other.svg":()=>f(()=>import("./BGeYsIfF.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/search.svg":()=>f(()=>import("./BZ8w0ofb.js"),[],import.meta.url).then(t=>t.default),"/assets/icons/shop.svg":()=>f(()=>import("./ClPQWvmX.js"),[],import.meta.url).then(t=>t.default)})).map(([t,r])=>[t.split("/").pop().split(".").shift(),r])),i=n.icon&&([e,o]=Y(()=>{var t;return(t=s==null?void 0:s[n.icon])==null?void 0:t.call(s)}),e=await e,o(),e);return(t,r)=>I(i)?(d(),m("div",{key:0,innerHTML:I(i),class:"base-icon"},null,8,ee)):P("",!0)}}),M=L(te,[["__scopeId","data-v-e37e1e8d"]]),oe={class:"base-location-input"},ne=["value"],se=g({__name:"BaseLocationInput",props:{value:{type:String,default:""},google:{type:Object,required:!0}},emits:["locationSelected"],setup(a,{emit:e}){const o=a,n=b(null),s={types:["geocode"],fields:["formatted_address","geometry","name","address_components"]};R(()=>{t()});const i=e;function t(){var u;const r=document.getElementById("geocode");n.value=new o.google.maps.places.Autocomplete(r,s),(u=n.value)==null||u.addListener("place_changed",()=>{var l,p,v;const c=(l=n.value)==null?void 0:l.getPlace();if(c){const h=(p=c.geometry)==null?void 0:p.location.lat(),E=(v=c.geometry)==null?void 0:v.location.lng();if(h&&E){const O=new K(h,E);i("locationSelected",O)}}})}return(r,u)=>{const c=M;return d(),m("div",oe,[_(c,{class:"icon-sxs secondary",icon:"search"}),y("input",{class:"input",id:"geocode",value:a.value,type:"text",placeholder:"Zoek op locatie"},null,8,ne)])}}}),ae=L(se,[["__scopeId","data-v-a90274ae"]]);function ie(a,e,o,n){function s(i){return i instanceof o?i:new o(function(t){t(i)})}return new(o||(o=Promise))(function(i,t){function r(l){try{c(n.next(l))}catch(p){t(p)}}function u(l){try{c(n.throw(l))}catch(p){t(p)}}function c(l){l.done?i(l.value):s(l.value).then(r,u)}c((n=n.apply(a,[])).next())})}function ce(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var re=function a(e,o){if(e===o)return!0;if(e&&o&&typeof e=="object"&&typeof o=="object"){if(e.constructor!==o.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=o.length)return!1;for(s=n;s--!==0;)if(!a(e[s],o[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(o).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(o,i[s]))return!1;for(s=n;s--!==0;){var t=i[s];if(!a(e[t],o[t]))return!1}return!0}return e!==e&&o!==o},le=ce(re);const N="__googleMapsScriptId";var A;(function(a){a[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE"})(A||(A={}));class ${constructor({apiKey:e,authReferrerPolicy:o,channel:n,client:s,id:i=N,language:t,libraries:r=[],mapIds:u,nonce:c,region:l,retries:p=3,url:v="https://maps.googleapis.com/maps/api/js",version:h}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=o,this.channel=n,this.client=s,this.id=i||N,this.language=t,this.libraries=r,this.mapIds=u,this.nonce=c,this.region=l,this.retries=p,this.url=v,this.version=h,$.instance){if(!le(this.options,$.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify($.instance.options)}`);return $.instance}$.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?A.FAILURE:this.done?A.SUCCESS:this.loading?A.LOADING:A.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,o)=>{this.loadCallback(n=>{n?o(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,o;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(i=>!n[i]&&delete n[i]),!((o=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||o===void 0)&&o.importLibrary||(i=>{let t,r,u,c="The Google Maps JavaScript API",l="google",p="importLibrary",v="__ib__",h=document,E=window;E=E[l]||(E[l]={});const O=E.maps||(E.maps={}),U=new Set,C=new URLSearchParams,Z=()=>t||(t=new Promise((T,V)=>ie(this,void 0,void 0,function*(){var j;yield r=h.createElement("script"),r.id=this.id,C.set("libraries",[...U]+"");for(u in i)C.set(u.replace(/[A-Z]/g,J=>"_"+J[0].toLowerCase()),i[u]);C.set("callback",l+".maps."+v),r.src=this.url+"?"+C,O[v]=T,r.onerror=()=>t=V(Error(c+" could not load.")),r.nonce=this.nonce||((j=h.querySelector("script[nonce]"))===null||j===void 0?void 0:j.nonce)||"",h.head.append(r)})));O[p]?console.warn(c+" only loads once. Ignoring:",i):O[p]=(T,...V)=>U.add(T)&&Z().then(()=>O[p](T,...V))})(n);const s=this.libraries.map(i=>this.importLibrary(i));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),i=>{const t=new ErrorEvent("error",{error:i});this.loadErrorCallback(t)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const o=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${o} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},o)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const q=g({__name:"GoogleMapLoader",setup(a){const e=F(),o=b(null);return R(async()=>{console.log("GoogleMapLoader mounted",e.public.GOOGLE_MAPS_API_KEY,e),o.value=await new $({libraries:["places","marker"],apiKey:e.public.GOOGLE_MAPS_API_KEY}).load().then()}),(n,s)=>(d(),m("div",null,[I(o)?x(n.$slots,"default",{key:0,google:I(o)}):P("",!0)]))}}),ue={class:"location-input"},_e=g({__name:"LocationInput",props:{value:{type:String,default:""}},emits:["locationSelected"],setup(a,{emit:e}){const o=e,n=s=>{o("locationSelected",s)};return(s,i)=>{const t=ae,r=q;return d(),m("div",ue,[_(r,null,{default:w(({google:u})=>[_(t,{onLocationSelected:n,value:a.value,google:u},null,8,["value","google"])]),_:1})])}}}),de=L(_e,[["__scopeId","data-v-1787c620"]]),pe={};function me(a,e){return d(),m("p",null,[x(a.$slots,"default",{},void 0,!0)])}const H=L(pe,[["render",me],["__scopeId","data-v-4efd3f75"]]),he={},fe={class:"base-tag text-s"};function ge(a,e){return d(),m("div",fe,[x(a.$slots,"default",{},void 0,!0)])}const ve=L(he,[["render",ge],["__scopeId","data-v-65da5038"]]),ye=a=>{switch(a){case"COMERCIEEL":return"office";case"PRIVAAT":return"house";case"PUBLIEK":return"farm";default:return"other"}},Ie={class:"location-header"},Le={class:"flex-column"},Ee={class:"location-tags flex-row"},we=g({__name:"LocationListItem",props:{location:{}},emits:["locationSelected"],setup(a,{emit:e}){const{$relativeTime:o}=W(),n=a,s=e,i=()=>{s("locationSelected",n.location.latLng)};return(t,r)=>{const u=M,c=H,l=ve;return d(),m("div",{class:"location-list-item",onClick:i},[y("div",Ie,[_(u,{class:"icon-l secondary",icon:I(ye)(t.location.type.toString())},null,8,["icon"]),y("div",Le,[_(c,{class:"text-primary bold"},{default:w(()=>[k(S(t.location.address),1)]),_:1}),_(c,{class:"text-grey text-s"},{default:w(()=>[k(S(t.location.city),1)]),_:1})])]),y("div",Ee,[_(c,{class:"text-black text-s flex-row icon-text"},{default:w(()=>[_(u,{icon:"calendar",class:"secondary icon-xs"}),k(" "+S(I(o)(t.location.createdAt.toDate())),1)]),_:1}),_(l,null,{default:w(()=>[k(S(t.location.type),1)]),_:1})])])}}}),z=L(we,[["__scopeId","data-v-b85ae2fc"]]),be={class:"location-list"},$e=g({__name:"LocationList",props:{locations:{}},emits:["locationSelected"],setup(a,{emit:e}){const o=e,n=s=>{o("locationSelected",s)};return(s,i)=>{const t=z;return d(),m("div",be,[(d(!0),m(D,null,G(s.locations,r=>(d(),B(t,{key:r.latLng.latitude+","+r.latLng.longitude,location:r,onLocationSelected:n},null,8,["location"]))),128))])}}}),Se=L($e,[["__scopeId","data-v-6d9fb022"]]),Oe={class:"button"},ke=g({__name:"BaseButton",props:{icon:{}},setup(a){return(e,o)=>{const n=M;return d(),m("button",Oe,[e.icon?(d(),B(n,{key:0,icon:e.icon,class:"button-icon"},null,8,["icon"])):P("",!0),x(e.$slots,"default",{},void 0,!0)])}}}),Ae=L(ke,[["__scopeId","data-v-385ac23b"]]),xe=["src"],Pe=g({__name:"BaseImage",props:{image:{}},setup(a){const e=a,o=b(""),n=async u=>{try{const l=await(await caches.open("streetview-images")).match(u);return l?URL.createObjectURL(await l.blob()):null}catch(c){return console.error("Error accessing cache:",c),null}},s=async(u,c)=>{try{const l=await caches.open("streetview-images"),p=await fetch(c);await l.put(u,p.clone())}catch(l){console.error("Error caching image:",l)}},i=async()=>{const u=`streetview-images-${t(e.image)}`,c=await n(u);if(c){o.value=c;return}o.value=e.image,await s(u,e.image)},t=u=>{let c=0;for(let l=0;l<u.length;l++){const p=u.charCodeAt(l);c=(c<<5)-c+p,c=c&c}return c.toString(36)},r=()=>{o.value="/images/placeholder.jpg"};return R(()=>{i()}),(u,c)=>(d(),m("img",{class:"base-image",src:o.value,onError:r},null,40,xe))}}),Re=g({__name:"LocationCard",props:{location:{}},emits:["locationSelected"],setup(a,{emit:e}){const o=a,n=e,s=()=>{n("locationSelected",o.location.latLng)},i=`https://maps.googleapis.com/maps/api/streetview?size=600x400&key=AIzaSyDx3x7OILDe1wWmng_pllwoxrH2mlqekCI&location=${o.location.latLng.latitude},${o.location.latLng.longitude}`;return(t,r)=>{const u=Pe,c=z;return d(),m("div",{class:"location-card",onClick:s},[_(u,{image:i,alt:"Location Street View",class:"location-image"}),_(c,{location:t.location},null,8,["location"])])}}}),Ce=L(Re,[["__scopeId","data-v-c7b49f84"]]),Te={class:"location-slider"},De=g({__name:"LocationSlider",props:{locations:{}},emits:["locationSelected"],setup(a,{emit:e}){const o=e,n=s=>{o("locationSelected",s)};return(s,i)=>{const t=Ce;return d(),m("div",Te,[(d(!0),m(D,null,G(s.locations,r=>(d(),B(t,{key:r.latLng.latitude+","+r.latLng.longitude,location:r,onLocationSelected:n},null,8,["location"]))),128))])}}}),Be=L(De,[["__scopeId","data-v-1b7f3f9e"]]),Me={class:"location-info-window"},Ve=g({__name:"LocationInfoWindow",props:{location:{}},setup(a){return(e,o)=>{const n=H;return d(),m("div",Me,[_(n,null,{default:w(()=>[k(S(e.location.address),1)]),_:1}),_(n,null,{default:w(()=>[k("Latitude: "+S(e.location.latitude)+", Longitude: "+S(e.location.longitude),1)]),_:1})])}}}),je=L(Ve,[["__scopeId","data-v-7cde891d"]]),Ge={key:0},Ue=g({__name:"BaseMarker",props:{map:{},position:{},title:{}},setup(a){const e=a,o=b(null),n=document.createElement("img");n.src="/icons/marker.svg",n.style.width="30px",n.style.height="30px";const s=new google.maps.Marker({map:e.map,position:{lat:e.position.lat,lng:e.position.lng},icon:n.src}),i=new google.maps.InfoWindow({disableAutoPan:!0});return s.addListener("click",()=>{i.close(),o.value instanceof HTMLElement&&i.setContent(o.value),i.open(e.map,s)}),(t,r)=>t.map?(d(),m("div",Ge,[y("div",{ref_key:"infoWindowRef",ref:o},[x(t.$slots,"default")],512)])):P("",!0)}}),Ne=g({__name:"BaseMap",props:{google:{},mapConfig:{},center:{}},setup(a){const e=a,o=b(null),n=b(null);return R(async()=>{try{n.value=new e.google.maps.Map(o.value,e.mapConfig)}catch(s){console.error("Error aloading map: ",s)}}),Q(()=>e.center,s=>{console.log("newCenter",s),n.value&&n.value.panTo(s)},{deep:!0}),(s,i)=>(d(),m(D,null,[y("div",{ref_key:"mapContainer",ref:o,class:"map"},null,512),I(n)?x(s.$slots,"default",{key:0,map:I(n)},void 0,!0):P("",!0)],64))}}),Ke=L(Ne,[["__scopeId","data-v-7b8c1f86"]]),Fe={class:"full-width"},We=g({__name:"LocationMap",props:{locations:{},center:{}},setup(a){const e=a,o=b(null),n=F(),s={center:{lat:e.center.latitude,lng:e.center.longitude},mapId:n.public.GOOGLE_MAPS_MAP_ID,zoom:12,disableDefaultUI:!0};return R(()=>{console.log(o.value)}),(i,t)=>{const r=je,u=Ue,c=Ke,l=q;return d(),m("div",Fe,[_(l,null,{default:w(({google:p})=>[_(c,{google:p,mapConfig:s,center:{lat:i.center.latitude,lng:i.center.longitude}},{default:w(({map:v})=>[(d(!0),m(D,null,G(i.locations,h=>(d(),B(u,{map:v,google:p,position:{lat:h.latLng.latitude,lng:h.latLng.longitude},title:h.address,key:h.id},{default:w(()=>[_(r,{location:h},null,8,["location"])]),_:2},1032,["map","google","position","title"]))),128))]),_:2},1032,["google","center"])]),_:1})])}}}),qe={class:"index"},He={class:"map-overlay"},ze={class:"sidebar"},Ze={class:"flex-row"},Je={class:"top-bar"},Ye={class:"info-buttons"},Qe={class:"bottom-bar"},tt=g({__name:"index",setup(a){const{$firestore:e}=W();X({title:"Wasted Spaces",meta:[{name:"",content:""}]});const o=b([]),n=b(new K(51.9146308,4.4709485)),s=b(100),i=async()=>{try{o.value=await e.getLocationsInRadius(n.value.latitude,n.value.longitude,s.value),console.log("Frontend fetched locations:",o.value)}catch(r){console.error("Error fetching locations:",r)}},t=r=>{console.log("handleLocationSelected",r),n.value=r};return i(),(r,u)=>{const c=M,l=de,p=Se,v=Ae,h=Be,E=We;return d(),m("div",qe,[y("div",He,[y("div",ze,[y("div",Ze,[_(c,{class:"logo icon-lxl",icon:"logo_standalone_red"}),_(c,{class:"logo",icon:"logo_text_long"})]),_(l,{class:"mt-1-0",onLocationSelected:t}),_(p,{locations:I(o),class:"mt-1-0",onLocationSelected:t},null,8,["locations"])]),y("div",Je,[_(l,{onLocationSelected:t})]),y("div",Ye,[y("div",null,[_(v,{class:"primary-inverted",icon:"documents"}),_(v,{class:"primary-inverted mt-0-5",icon:"info"})]),_(v,{class:"primary-inverted",icon:"add"})]),y("div",Qe,[_(h,{locations:I(o),onLocationSelected:t},null,8,["locations"])])]),_(E,{class:"map",locations:I(o),center:I(n)},null,8,["locations","center"])])}}});export{tt as default};
