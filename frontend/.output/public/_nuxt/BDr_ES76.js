import{d as g,E as v,F as Z,G as y,t as u,v as h,H as O,_ as L,r as I,o as x,I as F,J as A,l as K,z as d,A as w,x as S,B as M,y as C,K as D,L as U,M as j,N as z,m as Y}from"./D8d_KRVI.js";import{u as Q}from"./D74R_IxI.js";const X=["innerHTML"],ee=g({__name:"BaseIcon",props:{icon:{}},async setup(a){let e,t;const o=a,s=Object.fromEntries(Object.entries(Object.assign({"/assets/icons/add.svg":()=>v(()=>import("./cRUi5Wbx.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/documents.svg":()=>v(()=>import("./D0EcyRd7.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/farm.svg":()=>v(()=>import("./1JdtNKBh.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/house.svg":()=>v(()=>import("./RL16hfqJ.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/industry.svg":()=>v(()=>import("./Cmi3HAk2.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/info.svg":()=>v(()=>import("./C1Nw4fO-.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/logo_text.svg":()=>v(()=>import("./DF4MJzAr.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/logo_white.svg":()=>v(()=>import("./CmpJqoP0.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/office.svg":()=>v(()=>import("./DEu7ex7x.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/other.svg":()=>v(()=>import("./Ee-_WZrj.js"),[],import.meta.url).then(n=>n.default),"/assets/icons/shop.svg":()=>v(()=>import("./DHmTlYLQ.js"),[],import.meta.url).then(n=>n.default)})).map(([n,r])=>[n.split("/").pop().split(".").shift(),r])),i=o.icon&&([e,t]=Z(()=>{var n;return(n=s==null?void 0:s[o.icon])==null?void 0:n.call(s)}),e=await e,t(),e);return(n,r)=>y(i)?(u(),h("div",{key:0,innerHTML:y(i),class:"base-icon"},null,8,X)):O("",!0)}}),G=L(ee,[["__scopeId","data-v-009eb6a2"]]),te=["value"],oe=g({__name:"BaseLocationInput",props:{value:{type:String,default:""},google:{type:Object,required:!0}},emits:["locationSelected"],setup(a,{emit:e}){const t=a,o=I(null),s={types:["geocode"],fields:["formatted_address","geometry","name","address_components"]};x(()=>{n()});const i=e;function n(){var c;const r=document.getElementById("geocode");o.value=new t.google.maps.places.Autocomplete(r,s),(c=o.value)==null||c.addListener("place_changed",()=>{var l,p,f;const _=(l=o.value)==null?void 0:l.getPlace();if(_){const m=(p=_.geometry)==null?void 0:p.location.lat(),E=(f=_.geometry)==null?void 0:f.location.lng();if(m&&E){const $=new F(m,E);i("locationSelected",$)}}})}return(r,c)=>(u(),h("input",{id:"geocode",value:a.value,type:"text",placeholder:"Location",class:"base-location-input"},null,8,te))}}),ne=L(oe,[["__scopeId","data-v-5e09cada"]]);function se(a,e,t,o){function s(i){return i instanceof t?i:new t(function(n){n(i)})}return new(t||(t=Promise))(function(i,n){function r(l){try{_(o.next(l))}catch(p){n(p)}}function c(l){try{_(o.throw(l))}catch(p){n(p)}}function _(l){l.done?i(l.value):s(l.value).then(r,c)}_((o=o.apply(a,[])).next())})}function ie(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ae=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var o,s,i;if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!a(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),o=i.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=o;s--!==0;){var n=i[s];if(!a(e[n],t[n]))return!1}return!0}return e!==e&&t!==t},re=ie(ae);const N="__googleMapsScriptId";var k;(function(a){a[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE"})(k||(k={}));class b{constructor({apiKey:e,authReferrerPolicy:t,channel:o,client:s,id:i=N,language:n,libraries:r=[],mapIds:c,nonce:_,region:l,retries:p=3,url:f="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=o,this.client=s,this.id=i||N,this.language=n,this.libraries=r,this.mapIds=c,this.nonce=_,this.region=l,this.retries=p,this.url=f,this.version=m,b.instance){if(!re(this.options,b.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(b.instance.options)}`);return b.instance}b.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?k.FAILURE:this.done?k.SUCCESS:this.loading?k.LOADING:k.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(o=>{o?t(o.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const o={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(o).forEach(i=>!o[i]&&delete o[i]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(i=>{let n,r,c,_="The Google Maps JavaScript API",l="google",p="importLibrary",f="__ib__",m=document,E=window;E=E[l]||(E[l]={});const $=E.maps||(E.maps={}),V=new Set,P=new URLSearchParams,H=()=>n||(n=new Promise((R,T)=>se(this,void 0,void 0,function*(){var B;yield r=m.createElement("script"),r.id=this.id,P.set("libraries",[...V]+"");for(c in i)P.set(c.replace(/[A-Z]/g,J=>"_"+J[0].toLowerCase()),i[c]);P.set("callback",l+".maps."+f),r.src=this.url+"?"+P,$[f]=R,r.onerror=()=>n=T(Error(_+" could not load.")),r.nonce=this.nonce||((B=m.querySelector("script[nonce]"))===null||B===void 0?void 0:B.nonce)||"",m.head.append(r)})));$[p]?console.warn(_+" only loads once. Ignoring:",i):$[p]=(R,...T)=>V.add(R)&&H().then(()=>$[p](R,...T))})(o);const s=this.libraries.map(i=>this.importLibrary(i));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),i=>{const n=new ErrorEvent("error",{error:i});this.loadErrorCallback(n)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const q=g({__name:"GoogleMapLoader",setup(a){const e=K(),t=I(null);return x(async()=>{console.log("GoogleMapLoader mounted",e.public.GOOGLE_MAPS_API_KEY,e),t.value=await new b({libraries:["places","marker"],apiKey:e.public.GOOGLE_MAPS_API_KEY}).load().then()}),(o,s)=>(u(),h("div",null,[y(t)?A(o.$slots,"default",{key:0,google:y(t)}):O("",!0)]))}}),ce={class:"location-input"},le=g({__name:"LocationInput",props:{value:{type:String,default:""}},emits:["locationSelected"],setup(a,{emit:e}){const t=e,o=s=>{t("locationSelected",s)};return(s,i)=>{const n=ne,r=q;return u(),h("div",ce,[d(r,null,{default:w(({google:c})=>[d(n,{onLocationSelected:o,value:a.value,google:c},null,8,["value","google"])]),_:1})])}}}),ue=L(le,[["__scopeId","data-v-1787c620"]]),pe={};function de(a,e){return u(),h("p",null,[A(a.$slots,"default",{},void 0,!0)])}const W=L(pe,[["render",de],["__scopeId","data-v-40040a33"]]),_e={class:"flex-column"},me=g({__name:"LocationListItem",props:{location:{}},emits:["locationSelected"],setup(a,{emit:e}){const t=a,o=e,s=()=>{o("locationSelected",t.location.latLng)};return(i,n)=>{const r=G,c=W;return u(),h("div",{class:"location-list-item",onClick:s},[d(r,{class:"icon",icon:"industry"}),S("div",_e,[d(c,null,{default:w(()=>[M(C(i.location.address),1)]),_:1}),d(c,null,{default:w(()=>[M("+- 6 maanden")]),_:1})])])}}}),he=L(me,[["__scopeId","data-v-aaa20a69"]]),fe={class:"location-list"},ge=g({__name:"LocationList",props:{locations:{}},emits:["locationSelected"],setup(a,{emit:e}){const t=e,o=s=>{t("locationSelected",s)};return(s,i)=>{const n=he;return u(),h("div",fe,[(u(!0),h(D,null,U(s.locations,r=>(u(),j(n,{key:r.latLng.latitude+","+r.latLng.longitude,location:r,onLocationSelected:o},null,8,["location"]))),128))])}}}),ve=L(ge,[["__scopeId","data-v-65ebfa3e"]]),ye={class:"button"},Ie=g({__name:"BaseButton",props:{icon:{}},setup(a){return(e,t)=>{const o=G;return u(),h("button",ye,[e.icon?(u(),j(o,{key:0,icon:e.icon,class:"button-icon"},null,8,["icon"])):O("",!0),A(e.$slots,"default",{},void 0,!0)])}}}),Le=L(Ie,[["__scopeId","data-v-385ac23b"]]),Ee={class:"location-info-window"},we=g({__name:"LocationInfoWindow",props:{location:{}},setup(a){return(e,t)=>{const o=W;return u(),h("div",Ee,[d(o,null,{default:w(()=>[M(C(e.location.address),1)]),_:1}),d(o,null,{default:w(()=>[M("Latitude: "+C(e.location.latitude)+", Longitude: "+C(e.location.longitude),1)]),_:1})])}}}),be=L(we,[["__scopeId","data-v-7cde891d"]]),Se={key:0},$e=g({__name:"BaseMarker",props:{map:{},position:{},title:{}},setup(a){const e=a,t=I(null),o=document.createElement("img");o.src="/wasted-spaces/icons/marker.svg",o.style.width="30px",o.style.height="30px";const s=new google.maps.Marker({map:e.map,position:{lat:e.position.lat,lng:e.position.lng},icon:o.src});console.log(s.position);const i=new google.maps.InfoWindow({disableAutoPan:!0});return s.addListener("click",()=>{i.close(),t.value instanceof HTMLElement&&i.setContent(t.value),i.open(e.map,s)}),(n,r)=>n.map?(u(),h("div",Se,[S("div",{ref_key:"infoWindowRef",ref:t},[A(n.$slots,"default")],512)])):O("",!0)}}),ke=g({__name:"BaseMap",props:{google:{},mapConfig:{},center:{}},setup(a){const e=a,t=I(null),o=I(null);return x(async()=>{try{o.value=new e.google.maps.Map(t.value,e.mapConfig)}catch(s){console.error("Error aloading map: ",s)}}),z(()=>e.center,s=>{console.log("newCenter",s),o.value&&o.value.panTo(s)},{deep:!0}),(s,i)=>(u(),h(D,null,[S("div",{ref_key:"mapContainer",ref:t,class:"map"},null,512),y(o)?A(s.$slots,"default",{key:0,map:y(o)},void 0,!0):O("",!0)],64))}}),Oe=L(ke,[["__scopeId","data-v-7b8c1f86"]]),Ae={class:"full-width"},Pe=g({__name:"LocationMap",props:{locations:{},center:{}},setup(a){const e=a,t=I(null),o=K(),s={center:{lat:e.center.latitude,lng:e.center.longitude},mapId:o.public.GOOGLE_MAPS_MAP_ID,zoom:12,disableDefaultUI:!0};return x(()=>{console.log(t.value)}),(i,n)=>{const r=be,c=$e,_=Oe,l=q;return u(),h("div",Ae,[d(l,null,{default:w(({google:p})=>[d(_,{google:p,mapConfig:s,center:{lat:i.center.latitude,lng:i.center.longitude}},{default:w(({map:f})=>[(u(!0),h(D,null,U(i.locations,m=>(u(),j(c,{map:f,google:p,position:{lat:m.latLng.latitude,lng:m.latLng.longitude},title:m.address,key:m.id},{default:w(()=>[d(r,{location:m},null,8,["location"])]),_:2},1032,["map","google","position","title"]))),128))]),_:2},1032,["google","center"])]),_:1})])}}}),Re={class:"index"},Ce={class:"map-overlay"},Me={class:"sidebar"},xe={class:"info-buttons"},De=g({__name:"index",setup(a){const{$firestore:e}=Y();Q({title:"Kraakkaart",meta:[{name:"",content:""}]});const t=I([]),o=I(new F(51.9146308,4.4709485)),s=I(100),i=async()=>{try{t.value=await e.getLocationsInRadius(o.value.latitude,o.value.longitude,s.value),console.log("Frontend fetched locations:",t.value)}catch(r){console.error("Error fetching locations:",r)}},n=r=>{console.log("handleLocationSelected",r),o.value=r};return i(),(r,c)=>{const _=G,l=ue,p=ve,f=Le,m=Pe;return u(),h("div",Re,[S("div",Ce,[S("div",Me,[d(_,{class:"logo",icon:"logo_white"}),d(l,{class:"mt-1-0",onLocationSelected:n}),d(p,{locations:y(t),class:"mt-1-0",onLocationSelected:n},null,8,["locations"])]),S("div",xe,[S("div",null,[d(f,{class:"primary-inverted",icon:"documents"}),d(f,{class:"primary-inverted mt-0-5",icon:"info"})]),d(f,{class:"primary-inverted",icon:"add"})])]),d(m,{class:"map",locations:y(t),center:y(o)},null,8,["locations","center"])])}}});export{De as default};
